# Company Analyzer - Environment Variables Template
# Copy this file to .env and fill in your actual values

# ============================================
# Required Configuration
# ============================================

# Anthropic Claude API Key
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-your-api-key-here

# Application Port
PORT=8080

# ============================================
# Google Cloud Storage Configuration
# Required for screenshot endpoint
# ============================================

# Your Google Cloud Project ID
GCLOUD_PROJECT_ID=your-project-id

# Google Cloud Storage bucket name (must be globally unique)
GCLOUD_STORAGE_BUCKET_NAME=your-bucket-name

# Service account email (from service account JSON key)
GCLOUD_CLIENT_EMAIL=your-service-account@your-project.iam.gserviceaccount.com

# Private key (from service account JSON key)
# IMPORTANT: Include literal \n characters in .env file
# Example: "-----BEGIN PRIVATE KEY-----\nYour\nKey\nHere\n-----END PRIVATE KEY-----\n"
# For production deployment, this will be stored in Google Secret Manager
GCLOUD_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour\nMulti\nLine\nPrivate\nKey\n-----END PRIVATE KEY-----\n"

# ============================================
# Storage Options
# ============================================

# Make screenshots publicly accessible (true/false)
GCS_PUBLIC_ACCESS=true

# Signed URL expiration time (if public access is false)
# Examples: "1h", "1d", "7d", "30d"
GCS_SIGNED_URL_EXPIRY=7d

# ============================================
# Timeout Configuration (milliseconds)
# ============================================

# Maximum total request time (Express timeout)
SCREENSHOT_REQUEST_TIMEOUT=90000

# Maximum screenshot operation time (controller timeout)
SCREENSHOT_OPERATION_TIMEOUT=80000

# Browser launch timeout
SCREENSHOT_BROWSER_LAUNCH_TIMEOUT=15000

# Page navigation timeout (loading page)
SCREENSHOT_PAGE_NAVIGATION_TIMEOUT=30000

# Screenshot capture timeout (rendering and capturing)
SCREENSHOT_CAPTURE_TIMEOUT=20000

# Google Cloud Storage upload timeout
SCREENSHOT_GCS_UPLOAD_TIMEOUT=15000

# ============================================
# Concurrency and Performance
# ============================================

# Maximum number of concurrent screenshot operations
# Adjust based on available memory and CPU
# Recommended: 3-5 for 2Gi memory, 1-2 for 1Gi memory
SCREENSHOT_MAX_CONCURRENT=5

# ============================================
# Content Capture Settings
# ============================================

# Wait strategy for page load
# Options:
#   - domcontentloaded: Fastest, may miss images (simple pages only)
#   - load: Waits for all resources except async scripts
#   - networkidle2: Waits until â‰¤2 network connections (RECOMMENDED)
#   - networkidle0: Waits until 0 connections (never completes on some sites)
SCREENSHOT_WAIT_STRATEGY=networkidle2

# Delay after page load (milliseconds)
# Allows time for JavaScript execution and lazy-loaded content
# Recommended: 5000-10000ms for complex sites, 2000-3000ms for simple sites
SCREENSHOT_POST_LOAD_DELAY=5000

# ============================================
# Image Extraction Settings
# ============================================

# Maximum time for image extraction operation (milliseconds)
IMAGE_EXTRACTION_TIMEOUT=60000

# Minimum image width to include in results (pixels)
# Filters out small icons and tracking pixels
IMAGE_MIN_WIDTH=100

# Minimum image height to include in results (pixels)
IMAGE_MIN_HEIGHT=100

# Include CSS background images in extraction (true/false)
IMAGE_INCLUDE_BACKGROUNDS=false

# ============================================
# Node Environment
# ============================================

# Set to 'production' for deployment, 'development' for local
NODE_ENV=development
